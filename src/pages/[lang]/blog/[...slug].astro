---
import { languages } from "@/i18n/ui";
import { getByLang, modifySlug } from "@/i18n/utils";
import BlogPost from "@/layouts/BlogPost.astro";
import { type CollectionEntry, getCollection } from "astro:content";
// import BlogPost from "../../../layouts/BlogPost.astro";

export async function getStaticPaths() {
	const posts = await getCollection("blog");
	const langs = Object.keys(languages) as (keyof typeof languages)[];
	return posts.map((post) => {
		return {
			params: {
				slug: modifySlug(post.slug),
				lang: getByLang(post, langs[0]) ? langs[0] : langs[1],
			},
			props: post,
		};
	});
	// return posts.map((post) => ({
	// 	params: { slug: post.slug },
	// 	props: post,
	// }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;

const { Content } = await post.render();
---

<BlogPost {...post.data}>
	<Content />
</BlogPost>
